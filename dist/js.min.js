!function(){function a(a){a instanceof Array?a.forEach(function(a){b(a)}):b(a)}function b(a){if(f[a])return f[a];var b=new Image;b.onload=function(){f[a]=b,d()&&g.forEach(function(a){a()})},f[a]=!1,b.src=a}function c(a){return f[a]}function d(){var a=!0;for(var b in f)f.hasOwnProperty(b)&&!f[b]&&(a=!1);return a}function e(a){g.push(a)}var f={},g=[];window.Resources={load:a,get:c,onReady:e,isReady:d}}();var Enemy=function(a,b,c){this.sprite="images/enemy-bug.png",this.x=a,this.y=b,this.speed=c};Enemy.prototype.update=function(a){this.x=this.x+this.speed*a,this.x>500&&(this.x=-75,this.randomSpeed()),this.x>player.x-60&&this.x<player.x+60&&this.y>player.y-60&&this.y<player.y+60&&player.resetPosition()},Enemy.prototype.render=function(){ctx.drawImage(Resources.get(this.sprite),this.x,this.y)},Enemy.prototype.randomSpeed=function(){var a=Math.floor(3*Math.random()+2);this.speed=80*a};var playerXaxis=200,playerYaxis=400,player=function(){this.sprite="images/char-boy.png",this.x=playerXaxis,this.y=playerYaxis};player.prototype.update=function(a){},player.prototype.render=function(){ctx.drawImage(Resources.get(this.sprite),this.x,this.y)},player.prototype.resetPosition=function(){this.x=playerXaxis,this.y=playerYaxis},allEnemies=[];for(var i=0;3>i;i++){var changeSpeed=75*Math.floor(4*Math.random()+1);allEnemies.push(new Enemy(-50,82*i+50,changeSpeed))}var player=new player,leftwall=50,rightwall=380,bottomwall=380,topwall=130,step=100;player.handleInput=function(a){if("left"===a){if(this.x<leftwall)return null;this.x-=step}if("right"===a){if(this.x>rightwall)return null;this.x+=step}if("up"===a&&(this.y<topwall&&(this.x=playerXaxis,this.y=playerYaxis+82),this.y-=.82*step),"down"===a){if(this.y>bottomwall)return null;this.y+=.82*step}},document.addEventListener("keyup",function(a){var b={37:"left",38:"up",39:"right",40:"down"};player.handleInput(b[a.keyCode])});var Engine=function(a){function b(){var a=Date.now(),c=(a-i)/1e3;d(c),f(),i=a,k.requestAnimationFrame(b)}function c(){h(),i=Date.now(),b()}function d(a){e(a)}function e(a){allEnemies.forEach(function(b){b.update(a)}),player.update()}function f(){var a,b,c=["images/water-block.png","images/stone-block.png","images/stone-block.png","images/stone-block.png","images/grass-block.png","images/grass-block.png"],d=6,e=5;for(a=0;d>a;a++)for(b=0;e>b;b++)m.drawImage(Resources.get(c[a]),101*b,83*a);g()}function g(){allEnemies.forEach(function(a){a.render()}),player.render()}function h(){}var i,j=a.document,k=a.window,l=j.createElement("canvas"),m=l.getContext("2d");l.width=505,l.height=606,j.body.appendChild(l),Resources.load(["images/stone-block.png","images/water-block.png","images/grass-block.png","images/enemy-bug.png","images/char-boy.png"]),Resources.onReady(c),a.ctx=m}(this);